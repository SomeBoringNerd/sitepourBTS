<!DOCTYPE html>
<!--

        PROBLÈMES CONNUS :
            -> les redirections utilisant une ancre ont un comportement aléatoire

            -> l'image de la page 404 a des issues a charger une image aléatoire

-->
<html>
    <head>
        <title>JustAFeeling, RPG Game</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        
        <link rel="stylesheet" href="index.css">
        
        <style type="text/css">
            select {
                clear:both;
            }
        </style>
    </head>
    <body>
        <script>
            // ce script est utilisé pour faire marcher l'entièreté du site correctement
            // l'anti internet explorer est juste histoire de le rendre fool-proof.
                                    
            // check pour le userargent                                     eww regex scaryy
            detectIEregexp = (navigator.userAgent.indexOf('MSIE') != -1) ? /MSIE (\d+\.\d+);/ : /Trident.*rv[ :]*(\d+\.\d+)/ ;
            
            // print le resultat
            console.log(detectIEregexp.test(navigator.userAgent) ? "l'utisateur utilise internet explorer" : "l'utilisateur n'utilise pas internet explorer");

            // si on est sur internet explorer
            if (detectIEregexp.test(navigator.userAgent)){ 
                alert(navigator.appName + " n'est pas supporté. Le site ne marchera donc pas. merci d'utiliser un navigateur comme Firefox");
            }
            
            // transferer / conserver des infos d'une page a l'autre
            // en PHP c'est ezzz mais en html / js faut un peu plus d'ingéniosité
            // https://stackoverflow.com/a/17502197
            window.onload = function()
            {
                var url = document.location.href;

                // pour debug je print l'url actuelle du site
                // exemple : http://localhost/index.html?pages/fake_index.html
                console.log(url.toString());

                /* super simple : le check vérifie qu'une requete
                // POST existe dans l'url.
                // la verification pour la fin de l'url
                // sert a rendre le concept fool-proof
                // car sinon ça charge le fichier "" qui ne peut exister */

                if(url.includes('index.html?') && !url.endsWith('index.html?')){

                    // on récupère tout ce qu'il y'a après un "?" dans l'url.
                    // ça pourrait causer des problèmes si plusieurs sont présents
                    // mais vu que je fais en sorte pour que ça n'arrive pas
                    // seul un attardé sans cervelle devrai pouvoir le faire volontairement

                    POST = url.split('?')[1].split('&');
                    document.getElementById("iframe_modifiable").src = POST[0];
                    
                    // petite blague pas importante 
                    if(url.includes('404.html'))
                    {
                        setTimeout(function()
                        {
                            // >:c
                            location.href='https://youtu.be/dQw4w9WgXcQ?autoplay=1';
                        }, 10000);
                    }
                }else{
                    location.href='index.html?pages/fake_index.html';
                }
            }


        </script>
        <center>
        <div id="topDuSite">
            <top>
                <div class="dropdown">
                <span>
                    <pb id="black">_______</pb>
                    <a href="javascript:void(0)" onclick="location.href='index.html?pages/fake_index.html'">
                        <pb>Menu principal</pb>
                    </a>
                <pb id="black">______</pb>
                </span>
                <div class="dropdown-content" id="drop1">
                    <button onClick="location.href='index.html?pages/fake_index.html'"><pr>Page principale</pr></button><br>
                    <button onClick="location.href='index.html?pages/Contributeur.html'"><pr>Contributeurs</pr></button><br>
                    <button onClick="location.href='index.html?pages/FAQ.html'"><pr>Foire aux questions</pr></button><br>
                </div>
                </div>
            </top>
            <top>
                <div class="dropdown">
                    <pb id="black">____________</pb>
                    <a href="javascript:void(0)" onclick="location.href='index.html?wiki/index.html';">
                        <pb>Wiki</pb>
                    </a>
                    <pb id="black">____________</pb>
                    <div class="dropdown-content" id="drop2">

                        <button onClick="location.href='index.html?wiki/index.html';"><pr>Page principale</pr></button><br>
                        <button onClick="location.href='index.html?wiki/index.html#MAIN';"><pr>Personnages disponibles</pr></button><br>
                        <button onClick="location.href='index.html?wiki/index.html#ITEM';"><pr>Les Objets disponibles</pr></button><br>
                        <button onClick="location.href='index.html?wiki/index.html#ZONE';"><pr>Les Endroits</pr></button><br>
                    </div>
                </div>
            </top>
            <top>
                <div class="dropdown">
                    <pb id="black">____________</pb>
                    <a href="javascript:void(0)" onclick="location.href='index.html?wiki/index.html';">
                        <pb>Meta</pb>
                    </a>
                    <pb id="black">____________</pb>
                    <div class="dropdown-content" id="drop2">

                        <button onClick="location.href='index.html?pages/propos_site.html';"><pr>A propos du site</pr></button><br>
                        <button onClick="location.href='https://github.com/SomeBoringNerd/sitepourBTS'"><pr>Code source (github)</pr></button><br>
                        <button onClick="location.href='pages/contact.html'"><pr>contacter le gérant</pr></button><br>
                        <button onClick="location.href='index.html?pages/mention_legale.html'"><pr>Mentions légales</pr></button><br>
                    </div>
                </div>
            </top>
        </div>
        </center>
        <br>
        <br><br><br>

        <iframe src="" style="
            position:fixed; 
            top:0;
            left:0; 
            bottom:0; 
            right:0;
            width:100%;
            height:100%;
            border:none;
            margin:0;
            padding:0;
            overflow:hidden;
            z-index:1;"
            id="iframe_modifiable">
        </iframe>
    </body>
</html>